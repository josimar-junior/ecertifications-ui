<p-toast></p-toast>
<div class="ui-g">
  <div class="ui-g-12">
    <form [formGroup]="formCertification">
      <p-panel>

        <p-header>
            <div class="ui-helper-clearfix">
                <span class="ui-panel-title titulo-panel">Cadastrar Certificação</span>
                <a class="link-lista" [routerLink]="['/admin/listing']">Listar Certificações</a>
            </div>
        </p-header>

        <div class="ui-g">
          <div class="ui-g-4">
            <label class="required">Nome</label>
            <input type="text" pInputText style="width: 100%" formControlName="name">
          </div>

          <div class="ui-g-4">
            <label class="required">Exame</label>
            <input type="text" pInputText style="width: 100%" formControlName="exam">
          </div>

          <div class="ui-g-4">
            <label class="required">Organizador</label><br>
            <p-dropdown [options]="organizations" [style]="{'width':'100%'}" placeholder="Selecione" optionLabel="name"
              [filter]="true" formControlName="organization"></p-dropdown>
          </div>

        </div>

        <p-fieldset legend="Detalhes">
          <div class="ui-g">
            <div class="ui-g-7">
              <label>Descrição</label>
              <input type="text" pInputText style="width: 100%" formControlName="description">
            </div>

            <div class="ui-g-1">
              <button pButton label="Adicionar" icon="pi pi-save" style="margin-top: 18px" (click)="addDetail()"
                [disabled]="disableAddButton"></button>
            </div>
          </div>

          <div class="ui-g">
            <div class="ui-g-12">
              <p-table [value]="details">
                <ng-template pTemplate="header">
                  <tr>
                    <th>Descrição</th>
                    <th style="width: 90px">Deletar</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-detail>
                  <tr>
                    <td>{{ detail.description }}</td>
                    <td style="width: 90px; text-align: center">
                      <a (click)="delete(detail)"><i style="font-size: 1.9em" class="pi pi-trash"></i></a>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td colspan="2">
                      Nenhum detalhe encontrado.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </p-fieldset>

        <br /><br />

        <p-footer>
          <div class="ui-g">
            <button pButton label="Salvar" icon="pi pi-save" (click)="save()"
              [disabled]="formCertification.invalid"></button>
          </div>
        </p-footer>

      </p-panel>
      <p-confirmDialog acceptLabel="Sim" rejectLabel="Não"></p-confirmDialog>
    </form>
  </div>
</div>